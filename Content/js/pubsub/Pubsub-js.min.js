(function(n,t){"use strict";var i={};n.PubSub=i;t(i);typeof define=="function"&&define.amd?define(function(){return i}):typeof exports=="object"&&(module!==undefined&&module.exports&&(exports=module.exports=i),exports.PubSub=i,module.exports=exports=i)})(typeof window=="object"&&window||this,function(n){"use strict";function i(n){for(var t in n)if(n.hasOwnProperty(t))return!0;return!1}function e(n){return function(){throw n;}}function o(n,t,i){try{n(t,i)}catch(r){setTimeout(e(r),0)}}function s(n,t,i){n(t,i)}function r(n,i,r,u){var f=t[i],h=u?s:o,e;if(t.hasOwnProperty(i))for(e in f)f.hasOwnProperty(e)&&h(f[e],n,r)}function h(n,t,i){return function(){var u=String(n),f=u.lastIndexOf(".");for(r(n,n,t,i);f!==-1;)u=u.substr(0,f),f=u.lastIndexOf("."),r(n,u,t,i)}}function c(n){for(var r=String(n),u=Boolean(t.hasOwnProperty(r)&&i(t[r])),f=r.lastIndexOf(".");!u&&f!==-1;)r=r.substr(0,f),f=r.lastIndexOf("."),u=Boolean(t.hasOwnProperty(r)&&i(t[r]));return u}function u(n,t,i,r){var u=h(n,t,r),f=c(n);return f?(i===!0?u():setTimeout(u,0),!0):!1}var t={},f=-1;n.publish=function(t,i){return u(t,i,!1,n.immediateExceptions)};n.publishSync=function(t,i){return u(t,i,!0,n.immediateExceptions)};n.subscribe=function(n,i){if(typeof i!="function")return!1;t.hasOwnProperty(n)||(t[n]={});var r="uid_"+String(++f);return t[n][r]=i,r};n.clearAllSubscriptions=function(){t={}};n.clearSubscriptions=function(n){for(var i in t)t.hasOwnProperty(i)&&i.indexOf(n)===0&&delete t[i]};n.unsubscribe=function(i){var s=function(n){for(var i in t)if(t.hasOwnProperty(i)&&i.indexOf(n)===0)return!0;return!1},o=typeof i=="string"&&(t.hasOwnProperty(i)||s(i)),h=!o&&typeof i=="string",c=typeof i=="function",f=!1,e,r,u;if(o){n.clearSubscriptions(i);return}for(e in t)if(t.hasOwnProperty(e)){if(r=t[e],h&&r[i]){delete r[i];f=i;break}if(c)for(u in r)r.hasOwnProperty(u)&&r[u]===i&&(delete r[u],f=!0)}return f}});